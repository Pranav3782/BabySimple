
import React, { useState, useEffect } from 'react';
import { Sun, Moon, Zap, Menu, X, ArrowRight, Check, Github, Twitter, Linkedin, Copy, Share2, Sparkles, Layers, Wand2, LayoutDashboard, History, Settings, LogOut, ChevronRight, FileText, Activity, CreditCard, ShieldCheck, Globe } from 'lucide-react';
import { NICHES, FEATURES, PRICING_TIERS, TONES } from './constants';
import { NicheType, ViewType, ToneType, ModelType, HistoryItem } from './types';
import { GoogleGenerativeAI } from "@google/generative-ai";
import Groq from "groq-sdk";

const App: React.FC = () => {
  const [isDarkMode, setIsDarkMode] = useState(true);
  const [selectedNiche, setSelectedNiche] = useState<NicheType>('Legal');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [inputText, setInputText] = useState('');
  const [isSimplifying, setIsSimplifying] = useState(false);
  const [outputText, setOutputText] = useState('');
  const [usageCount, setUsageCount] = useState(0);
  const [showLimitModal, setShowLimitModal] = useState(false);
  const [userTier, setUserTier] = useState<'Starter' | 'Pro' | 'Enterprise'>('Starter');
  const [view, setView] = useState<ViewType>('landing');
  const [selectedTone, setSelectedTone] = useState<ToneType>('Standard');
  const [history, setHistory] = useState<HistoryItem[]>([]);
  const [activeModel, setActiveModel] = useState<ModelType>('Gemini 1.5 Flash');
  const [targetLanguage, setTargetLanguage] = useState<string>('English');
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [showAuthModal, setShowAuthModal] = useState(false);
  const [authMode, setAuthMode] = useState<'login' | 'signup'>('signup');
  const [userEmail, setUserEmail] = useState('');
  const [dashboardView, setDashboardView] = useState<'workspace' | 'history' | 'files' | 'usage'>('workspace');

  const toggleTheme = () => setIsDarkMode(!isDarkMode);
  const activeNiche = NICHES.find(n => n.id === selectedNiche)!;

  // Initialize and track usage
  useEffect(() => {
    const stored = localStorage.getItem('gist_usage');
    const today = new Date().toDateString();
    if (stored) {
      const { count, date } = JSON.parse(stored);
      if (date === today) setUsageCount(count);
      else {
        localStorage.setItem('gist_usage', JSON.stringify({ count: 0, date: today }));
        setUsageCount(0);
      }
    } else {
      localStorage.setItem('gist_usage', JSON.stringify({ count: 0, date: today }));
    }
  }, []);

  const incrementUsage = () => {
    const today = new Date().toDateString();
    const newCount = usageCount + 1;
    setUsageCount(newCount);
    localStorage.setItem('gist_usage', JSON.stringify({ count: newCount, date: today }));
  };

  const routeModel = (text: string): ModelType => {
    if (userTier === 'Starter') return 'Gemini 1.5 Flash';
    if (text.length < 300) return 'Groq (Llama-3)';
    return 'Gemini 1.5 Pro';
  };

  const saveHistory = (result: string, model: ModelType) => {
    if (userTier === 'Starter') {
      incrementUsage();
    } else {
      setHistory(prev => [{
        id: Date.now().toString(),
        timestamp: Date.now(),
        niche: selectedNiche,
        input: inputText,
        output: result,
        model: model,
        tone: selectedTone
      }, ...prev]);
    }
  };

  const handlePurchase = (tierName: string) => {
    if (tierName === 'Starter') {
      setUserTier('Starter');
      setView('landing');
    } else if (tierName === 'Gist Pro' || tierName === 'Gist Enterprise') {
      // Show auth modal for paid tiers
      setAuthMode('signup');
      setShowAuthModal(true);
    }
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const callSecondaryModel = async (text: string, tone: ToneType, niche: NicheType, apiKey: string) => {
    // 1. Check for xAI (Grok) Key
    if (apiKey.startsWith('xai-')) {
      console.log("Using xAI (Grok)...");
      const response = await fetch('https://api.x.ai/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          messages: [{
            role: 'system',
            content: `You are an expert at simplifying complex ${niche} jargon into plain English. Tone: ${tone}.`
          }, {
            role: 'user',
            content: `Simplify this text in ${targetLanguage} language: "${text}"`
          }],
          model: "grok-beta",
          stream: false,
          temperature: 0.3
        })
      });

      if (!response.ok) {
        const err = await response.text();
        throw new Error(`xAI Error: ${err}`);
      }

      const data = await response.json();
      return data.choices[0]?.message?.content || "No response from Grok.";
    }

    // 2. Default to Groq (Llama-3)
    const groq = new Groq({ apiKey, dangerouslyAllowBrowser: true });
    const chatCompletion = await groq.chat.completions.create({
      messages: [{
        role: 'user',
        content: `Simplify the following ${niche} technical/jargon-heavy text into plain ${targetLanguage} for a layman. Use a ${tone} tone. Keep it concise. Text: "${text}"`
      }],
      model: 'llama-3.3-70b-versatile',
    });
    return chatCompletion.choices[0]?.message?.content || "No response from Groq.";
  };

  const callGeminiWithFallback = async (apiKey: string, prompt: string) => {
    // Try both v1 and v1beta as some keys are restricted to specific versions
    const apiVersions = ['v1', 'v1beta'];
    const modelIds = [
      'models/gemini-1.5-flash',
      'models/gemini-1.5-flash-8b',
      'models/gemini-1.5-pro',
      'models/gemini-pro',
      'models/gemini-1.0-pro',
      'gemini-1.5-flash', // Some SDK versions handle prefixing themselves
      'gemini-2.0-flash-exp'
    ];

    let lastError = "";

    for (const version of apiVersions) {
      const genAI = new GoogleGenerativeAI(apiKey);
      // Note: The SDK doesn't expose a clean way to change version per call easily in old versions,
      // but we can try to use different model strings or initialization if needed.

      for (const modelId of modelIds) {
        try {
          console.log(`Checking Gemini: ${modelId} (${version})`);
          const model = genAI.getGenerativeModel({ model: modelId });
          const result = await model.generateContent(prompt);
          return { text: result.response.text(), usedModel: modelId };
        } catch (e: any) {
          lastError = e.message;
          console.warn(`Gemini ${modelId} failed:`, e.message);
          // If it's a permission error, we should probably stop and tell the user
          if (e.message.includes('API_KEY_INVALID') || e.message.includes('permission')) {
            throw e;
          }
        }
      }
    }
    throw new Error(`Gemini Error: ${lastError}. (TIP: Ensure 'Generative Language API' is enabled in Google Cloud Console if using a GCP key)`);
  };

  const handleSimplify = async () => {
    if (!inputText) return;
    if (userTier === 'Starter' && usageCount >= 5) {
      setShowLimitModal(true);
      return;
    }

    const model = routeModel(inputText);
    setActiveModel(model);
    setIsSimplifying(true);

    const getSafeKey = (key: any) => {
      if (!key || String(key) === "undefined") return "";
      return String(key).trim().replace(/['"]/g, "");
    };

    const geminiKey = getSafeKey(process.env.API_KEY || process.env.GEMINI_API_KEY);
    const groqKey = getSafeKey(process.env.GROQ_API_KEY);

    console.log("Diagnostics - Key Status:", {
      geminiFound: !!geminiKey,
      geminiPrefix: geminiKey.substring(0, 4),
      groqFound: !!groqKey,
      groqPrefix: groqKey.substring(0, 4)
    });

    try {
      // 1. Try Secondary Model directly if routed or if user only has that key
      if (model.includes('Groq') || (!geminiKey && groqKey)) {
        if (!groqKey || groqKey === "" || groqKey === "undefined") {
          setOutputText("Secondary API Key is missing. Please add GROQ_API_KEY (for Groq/xAI) to .env.local.");
          setIsSimplifying(false);
          return;
        }
        const result = await callSecondaryModel(inputText, selectedTone, selectedNiche, groqKey);
        setOutputText(result);
        saveHistory(result, groqKey.startsWith('xai-') ? 'Grok (xAI)' : 'Groq (Llama-3)');
        setIsSimplifying(false);
        return;
      }

      // 2. Try Gemini
      if (!geminiKey || geminiKey === "" || geminiKey === "undefined") {
        if (groqKey && groqKey !== "" && groqKey !== "undefined") {
          console.warn("Gemini key missing, trying Secondary fallback...");
          const result = await callSecondaryModel(inputText, selectedTone, selectedNiche, groqKey);
          setOutputText(result);
          saveHistory(result, groqKey.startsWith('xai-') ? 'Grok (xAI)' : 'Groq (Llama-3)');
          setIsSimplifying(false);
          return;
        }
        setOutputText("API Key Missing! Plase check your .env.local file. It should have: GEMINI_API_KEY=your_key_here. IMPORTANT: Restart the terminal after adding the key.");
        setIsSimplifying(false);
        return;
      }

      try {
        const prompt = `Simplify the following ${selectedNiche} technical/jargon-heavy text into plain ${targetLanguage} for a layman. 
        Use a ${selectedTone} tone. Ensure the output is concise and easy to understand.
        
Text to simplify:
"${inputText}"`;

        // Use the robust multi-model fallback helper
        const { text, usedModel } = await callGeminiWithFallback(geminiKey, prompt);

        setOutputText(text);
        saveHistory(text, usedModel as ModelType);
      } catch (geminiError: any) {
        console.error("Gemini failed after all retries:", geminiError);
        const geminiMsg = geminiError?.message || String(geminiError);

        // 3. Fallback to Secondary if Gemini fails
        if (groqKey && groqKey !== "" && groqKey !== "undefined") {
          try {
            const fallbackResult = await callSecondaryModel(inputText, selectedTone, selectedNiche, groqKey);
            setOutputText(fallbackResult);
            saveHistory(fallbackResult, groqKey.startsWith('xai-') ? 'Grok (xAI)' : 'Groq (Llama-3)');
          } catch (secError: any) {
            console.error("Secondary fallback failed:", secError);
            const secMsg = secError?.message || String(secError);

            // Critical: Check for xAI billing error specifically
            if (secMsg.includes('credits') || secMsg.includes('licenses')) {
              setOutputText(`Billing Error: Your xAI (Grok) account has no credits.
                
TIP: Agar aapke paas Groq (gsk_...) key hai toh wo use karein, wo free tier deti hai. 
xAI (Elon Musk wala) bina credits ke nahi chalta.

Gemini Error: ${geminiMsg}`);
            } else {
              setOutputText(`Critical Error: Both APIs failed.\nGemini: ${geminiMsg}\nSecondary: ${secMsg}`);
            }
          }
        } else {
          setOutputText(`Gemini Error: ${geminiMsg}. (Add GROQ_API_KEY to .env.local for better resilience)`);
        }
      }
    } catch (error) {
      console.error("Master catch triggered:", error);
      setOutputText("Error: " + (error instanceof Error ? error.message : "Simplification failed."));
    } finally {
      setIsSimplifying(false);
    }
  };

  useEffect(() => {
    setOutputText('');
    setInputText('');
  }, [selectedNiche, view]);

  const renderDashboard = () => (
    <div className={`flex h-screen overflow-hidden ${isDarkMode ? 'bg-[#020617]' : 'bg-slate-50'}`}>
      <aside className={`w-20 lg:w-72 border-r flex flex-col transition-all duration-500 z-50 ${isDarkMode ? 'bg-slate-950/40 border-slate-800/50' : 'bg-white border-slate-200'}`}>
        <div className="p-6 h-20 flex items-center justify-center lg:justify-start gap-3">
          <div className="bg-gradient-to-br from-indigo-500 to-fuchsia-600 p-2 rounded-xl scale-110">
            <Zap className="w-5 h-5 text-white fill-current" />
          </div>
          <span className="text-2xl font-black tracking-tighter hidden lg:block">Gist<span className="text-indigo-500">.</span></span>
        </div>
        <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
          {[
            { id: 'workspace', icon: <LayoutDashboard className="w-6 h-6" />, label: 'Workspace' },
            { id: 'history', icon: <History className="w-6 h-6" />, label: 'History' },
            { id: 'files', icon: <FileText className="w-6 h-6" />, label: 'Files' },
            { id: 'usage', icon: <Activity className="w-6 h-6" />, label: 'Insights' },
          ].map((item) => (
            <button
              key={item.id}
              onClick={() => setDashboardView(item.id as 'workspace' | 'history' | 'files' | 'usage')}
              className={`w-full flex items-center justify-center lg:justify-start gap-4 p-4 rounded-2xl transition-all ${dashboardView === item.id ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-600/20' : isDarkMode ? 'text-slate-500 hover:bg-slate-900 hover:text-slate-300' : 'text-slate-400 hover:bg-slate-100 hover:text-slate-600'}`}
            >
              {item.icon}
              <span className="font-bold hidden lg:block">{item.label}</span>
            </button>
          ))}
        </nav>
        {userTier === 'Enterprise' && (
          <div className="p-4 border-t border-slate-800/20">
            <div className={`flex items-center gap-3 p-4 rounded-2xl ${isDarkMode ? 'bg-indigo-500/10 text-indigo-400' : 'bg-indigo-50 text-indigo-600'}`}>
              <ShieldCheck className="w-6 h-6" />
              <span className="text-[10px] font-black uppercase tracking-widest hidden lg:block">Admin Active</span>
            </div>
          </div>
        )}
      </aside>

      <main className="flex-1 overflow-y-auto p-6 lg:p-12 relative">
        <header className="flex items-center justify-between mb-12 flex-wrap gap-4">
          <div className="flex items-center gap-6">
            <button
              onClick={() => setView('landing')}
              className={`p-3 rounded-full transition-all flex items-center justify-center border ${isDarkMode ? 'hover:bg-slate-900 border-slate-800 text-slate-400' : 'hover:bg-slate-100 border-slate-200 text-slate-600'}`}
              title="Return to Site"
            >
              <ArrowRight className="w-6 h-6 rotate-180" />
            </button>
            <div>
              <h2 className="text-3xl font-black tracking-tight">{userTier} Workspace</h2>
              <p className={isDarkMode ? 'text-slate-500 font-bold' : 'text-slate-400 font-bold text-sm'}>
                {userTier === 'Enterprise' ? 'Team Control Panel' : 'Individual Clarity Console'} • <span className="text-emerald-500">{activeModel}</span>
              </p>
            </div>
          </div>
          <div className="flex items-center gap-4">
            <button onClick={toggleTheme} className={`p-3 rounded-2xl transition-all ${isDarkMode ? 'bg-slate-900 text-yellow-500' : 'bg-white shadow-sm border text-slate-600 hover:bg-slate-50'}`}>
              {isDarkMode ? <Sun className="w-5 h-5" /> : <Moon className="w-5 h-5" />}
            </button>
          </div>
        </header>

        {dashboardView === 'workspace' && (
          <div className="grid lg:grid-cols-12 gap-10">
            <div className="lg:col-span-12 xl:col-span-8 space-y-8">
              <div className="flex flex-wrap gap-3">
                {TONES.map(tone => (
                  <button
                    key={tone.id}
                    onClick={() => setSelectedTone(tone.id)}
                    className={`px-6 py-3 rounded-2xl font-bold transition-all border-2 ${selectedTone === tone.id ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl shadow-indigo-600/30' : isDarkMode ? 'bg-slate-900 border-slate-800 text-slate-500 hover:border-slate-700' : 'bg-white border-slate-100 text-slate-400 hover:border-indigo-100'}`}
                  >
                    {tone.label}
                  </button>
                ))}
              </div>

              <div className={`flex items-center gap-3 p-4 rounded-2xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800/50' : 'bg-white border-slate-100'}`}>
                <Globe className="w-5 h-5 text-indigo-500" />
                <span className="text-sm font-bold">Output Language:</span>
                <select
                  value={targetLanguage}
                  onChange={(e) => setTargetLanguage(e.target.value)}
                  className={`flex-1 border-none outline-none font-bold cursor-pointer px-2 py-1 rounded ${isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}`}
                >
                  <option value="English" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>English</option>
                  <option value="Hindi" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>हिंदी (Hindi)</option>
                  <option value="Spanish" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>Español (Spanish)</option>
                  <option value="French" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>Français (French)</option>
                  <option value="German" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>Deutsch (German)</option>
                  <option value="Portuguese" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>Português (Portuguese)</option>
                  <option value="Arabic" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>العربية (Arabic)</option>
                  <option value="Chinese" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>中文 (Chinese)</option>
                  <option value="Japanese" className={isDarkMode ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}>日本語 (Japanese)</option>
                </select>
              </div>

              <div className={`rounded-[3rem] p-8 border-2 ${isDarkMode ? 'bg-slate-950/40 border-slate-800/50' : 'bg-white border-slate-100 shadow-sm'}`}>
                <textarea
                  value={inputText}
                  onChange={(e) => {
                    const text = e.target.value;
                    const limit = userTier === 'Pro' || userTier === 'Enterprise' ? 5000 : 800;
                    if (text.length <= limit) {
                      setInputText(text);
                    }
                  }}
                  placeholder="Paste your materials here..."
                  maxLength={userTier === 'Pro' || userTier === 'Enterprise' ? 5000 : 800}
                  className="w-full h-64 bg-transparent resize-none focus:outline-none text-xl leading-relaxed"
                ></textarea>
                <div className="mt-8 flex items-center justify-between">
                  <span className={`text-xs font-black uppercase tracking-widest ${inputText.length >= (userTier === 'Pro' || userTier === 'Enterprise' ? 5000 : 800) ? 'text-red-500' : 'text-slate-500'}`}>{inputText.length} / {userTier === 'Pro' || userTier === 'Enterprise' ? '5000' : '800'} Characters</span>
                  <button
                    onClick={handleSimplify}
                    disabled={!inputText || isSimplifying}
                    className="bg-indigo-600 hover:bg-indigo-700 text-white px-10 py-5 rounded-[2rem] text-xl font-black shadow-2xl shadow-indigo-500/30 transition-all hover:scale-105 active:scale-95 flex items-center gap-3"
                  >
                    {isSimplifying ? <div className="w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"></div> : <Wand2 className="w-6 h-6" />}
                    {isSimplifying ? 'Refining...' : 'Generate Gist'}
                  </button>
                </div>
              </div>

              {outputText && (
                <div className={`rounded-[3rem] p-10 border-2 animate-in fade-in slide-in-from-bottom-8 duration-700 overflow-hidden ${isDarkMode ? 'bg-indigo-950/20 border-indigo-500/30 text-indigo-50' : 'bg-emerald-50 border-emerald-100 text-emerald-900'}`}>
                  <div className="flex items-center justify-between mb-8 text-emerald-500">
                    <div className="flex items-center gap-3">
                      <Sparkles className="w-5 h-5" />
                      <span className="text-xs font-black uppercase tracking-widest">Output Gist</span>
                    </div>
                    <div className="flex gap-2">
                      <button onClick={() => navigator.clipboard.writeText(outputText)} className="p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors"><Copy className="w-5 h-5" /></button>
                      <button className="p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors"><Share2 className="w-5 h-5" /></button>
                    </div>
                  </div>
                  <p className="text-2xl leading-relaxed font-medium break-words overflow-wrap-anywhere">{outputText}</p>
                </div>
              )}
            </div>

            <div className="lg:col-span-12 xl:col-span-4" style={{ display: view === 'dashboard' ? 'block' : 'none' }}>
              <div className={`rounded-[3rem] border-2 h-full min-h-[500px] flex flex-col overflow-hidden ${isDarkMode ? 'bg-slate-900/40 border-slate-800/50' : 'bg-white border-slate-100 shadow-sm'}`}>
                <div className="p-8 border-b border-white/5 flex items-center justify-between font-black uppercase tracking-tighter">
                  <h3>Session History</h3>
                  <span className="bg-indigo-500/10 text-indigo-500 px-3 py-1 rounded-lg text-xs">{history.length}</span>
                </div>
                <div className="flex-1 overflow-y-auto p-4 space-y-4">
                  {history.length === 0 ? (
                    <div className="h-full flex flex-col items-center justify-center text-center p-8 opacity-50 space-y-4">
                      <History className="w-12 h-12" />
                      <p className="font-bold">No active gists.</p>
                    </div>
                  ) : (
                    history.map((item) => (
                      <div key={item.id} className={`p-6 rounded-[2rem] border transition-all cursor-pointer group ${isDarkMode ? 'bg-slate-950/40 border-slate-800/50 hover:border-indigo-500/50' : 'bg-slate-50 border-slate-100 hover:border-indigo-200'}`}>
                        <div className="flex items-center justify-between mb-3 text-[10px] font-black uppercase tracking-[0.2em]">
                          <span className="text-indigo-500">{item.niche}</span>
                          <span className="text-slate-500">{new Date(item.timestamp).toLocaleTimeString()}</span>
                        </div>
                        <p className="text-sm font-bold line-clamp-2 mb-2 group-hover:text-indigo-400 transition-colors">{item.input}</p>
                        <div className="flex items-center gap-2 opacity-60 text-[10px] uppercase font-black tracking-widest">
                          <Activity className="w-3 h-3 text-emerald-500" />
                          <span>{item.model}</span>
                        </div>
                      </div>
                    ))
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
  )
}

{
  dashboardView === 'history' && (
    <div className="max-w-5xl">
      <h3 className="text-2xl font-black mb-8">Your History</h3>
      <div className="space-y-4">
        {history.length === 0 ? (
          <div className={`p-12 rounded-3xl border-2 text-center ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
            <History className="w-16 h-16 mx-auto mb-4 opacity-30" />
            <p className="text-lg font-bold opacity-50">No history yet. Start simplifying to see your past work here!</p>
            <p className="text-sm opacity-30 mt-2">History is saved locally in your browser</p>
          </div>
        ) : (
          history.map((item) => (
            <div key={item.id} className={`p-6 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800 hover:border-indigo-500/50' : 'bg-white border-slate-100 hover:border-indigo-200'} transition-all`}>
              <div className="flex items-center justify-between mb-4">
                <span className="text-xs font-black uppercase tracking-widest text-indigo-500">{item.niche}</span>
                <span className="text-xs opacity-50">{new Date(item.timestamp).toLocaleString()}</span>
              </div>
              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <p className="text-xs font-bold opacity-50 mb-2">INPUT</p>
                  <p className="text-sm line-clamp-3">{item.input}</p>
                </div>
                <div>
                  <p className="text-xs font-bold opacity-50 mb-2">OUTPUT</p>
                  <p className="text-sm line-clamp-3 text-emerald-500">{item.output}</p>
                </div>
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  )
}

{
  dashboardView === 'files' && (
    <div className="max-w-5xl">
      <h3 className="text-2xl font-black mb-8">File Upload</h3>
      <div className={`p-16 rounded-3xl border-2 border-dashed text-center ${isDarkMode ? 'bg-slate-900/40 border-slate-700' : 'bg-slate-50 border-slate-300'}`}>
        <FileText className="w-20 h-20 mx-auto mb-6 opacity-30" />
        <h4 className="text-xl font-black mb-2">Coming Soon</h4>
        <p className="opacity-60 max-w-md mx-auto">Upload PDF, DOCX, or TXT files for batch simplification. This feature will be available in the next update.</p>
      </div>
    </div>
  )
}

{
  dashboardView === 'usage' && (
    <div className="max-w-5xl">
      <h3 className="text-2xl font-black mb-8">Usage Insights</h3>
      <div className="grid md:grid-cols-3 gap-6 mb-8">
        <div className={`p-6 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-white border-slate-100'}`}>
          <Activity className="w-8 h-8 text-indigo-500 mb-4" />
          <p className="text-3xl font-black mb-2">{history.length}</p>
          <p className="text-sm opacity-60">Total Simplifications</p>
        </div>
        <div className={`p-6 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-white border-slate-100'}`}>
          <Zap className="w-8 h-8 text-emerald-500 mb-4" />
          <p className="text-3xl font-black mb-2">{userTier}</p>
          <p className="text-sm opacity-60">Current Plan</p>
        </div>
        <div className={`p-6 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-white border-slate-100'}`}>
          <Globe className="w-8 h-8 text-fuchsia-500 mb-4" />
          <p className="text-3xl font-black mb-2">{targetLanguage}</p>
          <p className="text-sm opacity-60">Active Language</p>
        </div>
      </div>
      <div className={`p-8 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-white border-slate-100'}`}>
        <h4 className="text-lg font-black mb-4">Account Info</h4>
        <div className="space-y-3">
          <div className="flex justify-between">
            <span className="opacity-60">Email</span>
            <span className="font-bold">{userEmail || 'Not set'}</span>
          </div>
          <div className="flex justify-between">
            <span className="opacity-60">Character Limit</span>
            <span className="font-bold">{userTier === 'Pro' || userTier === 'Enterprise' ? '5,000' : '800'}</span>
          </div>

        </main >
      </div >
      );

const renderPrivacyPolicy = () => (
      <div className={`min-h-screen ${isDarkMode ? 'bg-[#020617] text-white' : 'bg-[#f8fafc] text-slate-900'}`}>
        <nav className={`sticky top-0 z-50 backdrop-blur-xl border-b ${isDarkMode ? 'bg-slate-950/60 border-slate-800/50' : 'bg-white/60 border-slate-200/50'}`}>
          <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div className="flex items-center gap-3 cursor-pointer group" onClick={() => setView('landing')}>
              <div className="bg-gradient-to-br from-indigo-500 to-fuchsia-600 p-2 rounded-xl group-hover:rotate-12 transition-all">
                <Zap className="w-5 h-5 text-white fill-current" />
              </div>
              <span className="text-2xl font-black tracking-tighter">Gist<span className="text-indigo-500">.</span></span>
            </div>
            <button onClick={() => setView('landing')} className="text-sm font-bold hover:text-indigo-500 transition-colors">← Back to Home</button>
          </div>
        </nav>
        <div className="max-w-4xl mx-auto px-6 py-24">
          <h1 className="text-5xl font-black mb-8 tracking-tight">Privacy Policy</h1>
          <p className="text-sm opacity-50 mb-12">Last Updated: January 11, 2026</p>

          <div className="space-y-8 text-lg leading-relaxed">
            <section>
              <h2 className="text-2xl font-black mb-4">1. Information We Collect</h2>
              <p className="opacity-80">We collect information you provide directly to us when using Gist, including text you submit for simplification. We do not store your simplified content permanently unless you are a Pro or Enterprise user with history enabled.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">2. How We Use Your Information</h2>
              <p className="opacity-80">Your information is used solely to provide and improve our text simplification services. We process your text through AI models (Groq, Gemini) to generate simplified outputs. We do not sell your data to third parties.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">3. Data Storage and Security</h2>
              <p className="opacity-80">Free tier users: Your data is processed in real-time and not stored. Pro/Enterprise users: Session history is stored locally in your browser using localStorage. We implement industry-standard security measures to protect your information.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">4. Third-Party Services</h2>
              <p className="opacity-80">We use third-party AI services (Groq, Google Gemini) to process your text. These services have their own privacy policies. We recommend reviewing their policies: Groq Privacy Policy and Google AI Privacy Policy.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">5. Your Rights</h2>
              <p className="opacity-80">You have the right to access, correct, or delete your personal information. For free tier users, no data is stored. Pro/Enterprise users can clear their history at any time through the dashboard.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">6. Contact Us</h2>
              <p className="opacity-80">If you have questions about this Privacy Policy, please contact us at privacy@gist.ai</p>
            </section>
          </div>
        </div>
      </div>
      );

const renderTermsAndConditions = () => (
      <div className={`min-h-screen ${isDarkMode ? 'bg-[#020617] text-white' : 'bg-[#f8fafc] text-slate-900'}`}>
        <nav className={`sticky top-0 z-50 backdrop-blur-xl border-b ${isDarkMode ? 'bg-slate-950/60 border-slate-800/50' : 'bg-white/60 border-slate-200/50'}`}>
          <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div className="flex items-center gap-3 cursor-pointer group" onClick={() => setView('landing')}>
              <div className="bg-gradient-to-br from-indigo-500 to-fuchsia-600 p-2 rounded-xl group-hover:rotate-12 transition-all">
                <Zap className="w-5 h-5 text-white fill-current" />
              </div>
              <span className="text-2xl font-black tracking-tighter">Gist<span className="text-indigo-500">.</span></span>
            </div>
            <button onClick={() => setView('landing')} className="text-sm font-bold hover:text-indigo-500 transition-colors">← Back to Home</button>
          </div>
        </nav>
        <div className="max-w-4xl mx-auto px-6 py-24">
          <h1 className="text-5xl font-black mb-8 tracking-tight">Terms & Conditions</h1>
          <p className="text-sm opacity-50 mb-12">Last Updated: January 11, 2026</p>

          <div className="space-y-8 text-lg leading-relaxed">
            <section>
              <h2 className="text-2xl font-black mb-4">1. Acceptance of Terms</h2>
              <p className="opacity-80">By accessing and using Gist, you accept and agree to be bound by these Terms and Conditions. If you do not agree to these terms, please do not use our service.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">2. Service Description</h2>
              <p className="opacity-80">Gist is an AI-powered text simplification platform that converts complex jargon into plain language. We offer three tiers: Starter (free), Pro, and Enterprise, each with different features and usage limits.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">3. User Responsibilities</h2>
              <p className="opacity-80">You are responsible for the content you submit to Gist. You must not submit illegal, harmful, or copyrighted content without permission. You agree to use the service only for lawful purposes.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">4. Usage Limits</h2>
              <p className="opacity-80">Free tier users are limited to 5 simplifications per day. Pro and Enterprise users have unlimited usage. We reserve the right to modify these limits with notice.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">5. Intellectual Property</h2>
              <p className="opacity-80">You retain all rights to the content you submit. The simplified output generated by Gist is provided to you for your use. Gist and its branding are the intellectual property of Gist AI Systems.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">6. Disclaimer of Warranties</h2>
              <p className="opacity-80">Gist is provided "as is" without warranties of any kind. While we strive for accuracy, we do not guarantee that simplified outputs will be error-free or suitable for all purposes. Use at your own discretion.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">7. Limitation of Liability</h2>
              <p className="opacity-80">Gist AI Systems shall not be liable for any indirect, incidental, or consequential damages arising from your use of the service. Our total liability shall not exceed the amount you paid for the service in the past 12 months.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">8. Termination</h2>
              <p className="opacity-80">We reserve the right to terminate or suspend your access to Gist at any time for violation of these terms or for any other reason at our discretion.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">9. Changes to Terms</h2>
              <p className="opacity-80">We may update these Terms and Conditions from time to time. Continued use of the service after changes constitutes acceptance of the new terms.</p>
            </section>

            <section>
              <h2 className="text-2xl font-black mb-4">10. Contact Information</h2>
              <p className="opacity-80">For questions about these Terms, please contact us at legal@gist.ai</p>
            </section>
          </div>
        </div>
      </div>
      );

      return (
      <div className={`min-h-screen transition-all duration-700 ease-in-out selection:bg-indigo-500 selection:text-white ${isDarkMode ? 'bg-[#020617] text-white' : 'bg-[#f8fafc] text-slate-900'}`}>
        {view === 'privacy' ? renderPrivacyPolicy() : view === 'terms' ? renderTermsAndConditions() : view === 'dashboard' ? renderDashboard() : (
          <>
            <div className="fixed inset-0 overflow-hidden pointer-events-none z-0">
              <div className={`absolute -top-[20%] -left-[10%] w-[60%] h-[60%] blur-[120px] opacity-40 animate-pulse ${isDarkMode ? 'bg-indigo-600' : 'bg-blue-200'}`}></div>
              <div className={`absolute top-[10%] -right-[15%] w-[50%] h-[50%] blur-[120px] opacity-30 ${isDarkMode ? 'bg-fuchsia-700' : 'bg-pink-100'}`}></div>
            </div>

            <nav className={`sticky top-0 z-50 backdrop-blur-xl border-b transition-all duration-500 ${isDarkMode ? 'bg-slate-950/60 border-slate-800/50' : 'bg-white/60 border-slate-200/50'}`}>
              <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
                <div className="flex items-center gap-3 cursor-pointer group" onClick={() => setView('landing')}>
                  <div className="bg-gradient-to-br from-indigo-500 to-fuchsia-600 p-2 rounded-xl group-hover:rotate-12 transition-all">
                    <Zap className="w-5 h-5 text-white fill-current" />
                  </div>
                  <span className="text-2xl font-black tracking-tighter">Gist<span className="text-indigo-500">.</span></span>
                </div>

                <div className="hidden md:flex items-center space-x-10">
                  {['Features', 'Simulator', 'Pricing'].map((item) => (
                    <a key={item} href={`#${item.toLowerCase()}`} className="text-sm font-bold hover:text-indigo-500 transition-colors relative group uppercase tracking-widest">
                      {item}
                      <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-indigo-500 transition-all group-hover:w-full"></span>
                    </a>
                  ))}
                  <div className="h-6 w-[1px] bg-slate-800/20"></div>
                  {userTier !== 'Starter' && (
                    <button
                      onClick={() => setView('dashboard')}
                      className={`flex items-center gap-2.5 px-6 py-2 rounded-2xl font-black uppercase tracking-tighter transition-all group ${isDarkMode ? 'bg-indigo-600/10 text-indigo-400 border border-indigo-500/20 hover:bg-indigo-600 hover:text-white' : 'bg-indigo-600 text-white shadow-xl shadow-indigo-600/20 hover:scale-105'}`}
                    >
                      <span className="text-[10px]">Workspace</span>
                      <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
                    </button>
                  )}
                  <button onClick={toggleTheme} className={`p-2.5 rounded-xl transition-all ${isDarkMode ? 'bg-slate-900 text-yellow-500 hover:bg-slate-800' : 'bg-white shadow-sm border text-slate-600 hover:bg-slate-50'}`}>
                    {isDarkMode ? <Sun className="w-5 h-5" /> : <Moon className="w-5 h-5" />}
                  </button>
                </div>

                <div className="md:hidden flex items-center gap-4">
                  {userTier !== 'Starter' && (
                    <button
                      onClick={() => setView('dashboard')}
                      className="p-2.5 rounded-xl bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 active:scale-95 transition-all"
                    >
                      <ArrowRight className="w-6 h-6" />
                    </button>
                  )}
                  <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2">{isMenuOpen ? <X className="w-7 h-7" /> : <Menu className="w-7 h-7" />}</button>
                </div>
              </div>

              {isMenuOpen && (
                <div className={`md:hidden p-6 border-t animate-in slide-in-from-top-4 duration-300 ${isDarkMode ? 'bg-slate-950 border-slate-800' : 'bg-white border-slate-100'}`}>
                  <div className="flex flex-col space-y-6 font-black uppercase tracking-widest">
                    {['Features', 'Simulator', 'Pricing'].map(item => (
                      <a key={item} href={`#${item.toLowerCase()}`} onClick={() => setIsMenuOpen(false)}>{item}</a>
                    ))}
                    {userTier === 'Starter' && <a href="#pricing" onClick={() => setIsMenuOpen(false)} className="bg-indigo-600 text-white w-full py-4 rounded-2xl text-center shadow-indigo-600/20 shadow-xl">Try Pro</a>}
                  </div>
                </div>
              )}
            </nav>

            <section className="relative pt-32 pb-24 px-6 text-center">
              <div className="max-w-6xl mx-auto">
                <div className={`inline-flex items-center gap-2 px-5 py-2 rounded-full text-[10px] font-black mb-10 border transition-all hover:scale-105 ${isDarkMode ? 'bg-indigo-500/10 border-indigo-500/30 text-indigo-400' : 'bg-indigo-50 border-indigo-100 text-indigo-600'}`}>
                  <span className="uppercase tracking-[0.3em]">Precision-Engineered Clarity</span>
                </div>
                <h1 className="text-6xl md:text-8xl font-[900] tracking-tighter mb-8 leading-[0.95]">
                  Everything is <br className="hidden md:block" />
                  <span className="bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-400">clearer with Gist.</span>
                </h1>
                <p className={`text-xl md:text-2xl mb-12 max-w-3xl mx-auto leading-relaxed font-medium transition-opacity ${isDarkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                  Tired of corporate doublespeak and dense legal jargon? <br className="hidden md:block" />
                  We translate the complex into the everyday, instantly.
                </p>
                <div className="flex flex-col sm:flex-row items-center justify-center gap-6">
                  <a href="#simulator" className="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-10 py-5 rounded-[2rem] text-xl font-black shadow-2xl shadow-indigo-500/30 transition-all hover:scale-110 active:scale-95 flex items-center justify-center gap-3">
                    Start Gistifying <ArrowRight className="w-6 h-6" />
                  </a>
                  <button className={`w-full sm:w-auto px-10 py-5 rounded-[2rem] text-xl font-black transition-all hover:scale-110 active:scale-95 border-2 ${isDarkMode ? 'bg-white/5 border-white/10 hover:bg-white/10 text-white' : 'bg-white border-slate-200 text-slate-800'}`}>
                    Watch Demo
                  </button>
                </div>
              </div>
            </section>

            <section id="simulator" className="py-24 px-6 relative">
              <div className="max-w-7xl mx-auto">
                <div className="text-center mb-16">
                  <h2 className="text-4xl md:text-6xl font-black mb-6 tracking-tight">One Tool, <span className="text-indigo-500 italic">Unlimited</span> Contexts</h2>
                  <p className={`text-lg max-w-2xl mx-auto opacity-60 font-bold ${isDarkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                    From medical charts to technical docs, we've got you covered.
                  </p>
                  <div className="flex flex-wrap justify-center gap-4 mt-12">
                    {NICHES.map((n) => (
                      <button
                        key={n.id}
                        onClick={() => setSelectedNiche(n.id)}
                        className={`px-8 py-4 rounded-[1.5rem] font-black transition-all border-2 text-sm ${selectedNiche === n.id ? 'bg-indigo-600 text-white border-indigo-400 shadow-2xl shadow-indigo-500/40 scale-110' : isDarkMode ? 'bg-slate-900/50 text-slate-400 border-slate-800 hover:border-slate-700' : 'bg-white text-slate-500 border-slate-100 hover:border-indigo-200'}`}
                      >
                        {n.label}
                      </button>
                    ))}
                  </div>
                </div>

                <div className={`rounded-[3rem] p-1 transition-all duration-700 bg-gradient-to-br ${isDarkMode ? 'from-indigo-500/30 via-fuchsia-500/20 to-cyan-500/30' : 'from-indigo-100 via-fuchsia-50 to-cyan-100'} group hover:shadow-[0_0_100px_rgba(99,102,241,0.2)]`}>
                  <div className={`rounded-[2.95rem] p-8 md:p-12 flex flex-col lg:flex-row gap-12 ${isDarkMode ? 'bg-[#0a0f1e]/90 backdrop-blur-3xl shadow-inner' : 'bg-white/90 backdrop-blur-3xl shadow-xl shadow-slate-200'}`}>
                    <div className="flex-1 flex flex-col">
                      <div className="flex items-center gap-3 mb-6 font-black uppercase text-indigo-500 text-xs tracking-[0.3em]"><Layers className="w-5 h-5" /> Source Material</div>
                      <textarea
                        value={inputText}
                        onChange={e => {
                          const text = e.target.value;
                          if (text.length <= 800) {
                            setInputText(text);
                          }
                        }}
                        placeholder={activeNiche.placeholder}
                        maxLength={800}
                        className={`w-full h-80 p-8 rounded-[3rem] border-2 bg-transparent resize-none focus:outline-none transition-all duration-500 text-xl leading-relaxed ${isDarkMode ? 'border-slate-800 text-slate-300 focus:border-indigo-500/50' : 'border-slate-100 text-slate-800 focus:border-indigo-200'}`}
                      ></textarea>
                      <div className="mt-2 text-right">
                        <span className={`text-xs font-black uppercase tracking-widest ${inputText.length >= 800 ? 'text-red-500' : 'text-slate-500 opacity-50'}`}>{inputText.length} / 800</span>
                      </div>
                      <button onClick={handleSimplify} disabled={!inputText || isSimplifying} className={`mt-8 py-5 rounded-[2.5rem] font-black text-xl flex items-center justify-center gap-3 transition-all ${!inputText || isSimplifying ? 'bg-slate-800 text-slate-500' : 'bg-indigo-600 text-white shadow-2xl shadow-indigo-600/30 hover:bg-indigo-700 hover:-translate-y-1'}`}>
                        {isSimplifying ? <div className="w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"></div> : <Wand2 className="w-6 h-6" />}
                        <span>{usageCount >= 5 ? 'Daily Limit Hit' : 'Simplify Content'}</span>
                      </button>
                      <div className="mt-4 flex items-center justify-center gap-2">
                        <div className="flex gap-1">{[1, 2, 3, 4, 5].map(i => <div key={i} className={`h-1.5 w-6 rounded-full transition-all duration-500 ${i <= usageCount ? 'bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.6)]' : isDarkMode ? 'bg-slate-800' : 'bg-slate-200'}`}></div>)}</div>
                        <span className={`text-[10px] font-black uppercase tracking-widest opacity-40 ml-2`}>{5 - usageCount} Uses Left Today</span>
                      </div>
                    </div>

                    <div className="hidden lg:flex flex-col items-center justify-center opacity-10"><div className="w-[1px] h-full bg-indigo-500"></div><ArrowRight className="my-4 text-indigo-500" /><div className="w-[1px] h-full bg-indigo-500"></div></div>

                    <div className="flex-1 flex flex-col text-left">
                      <div className="flex items-center gap-3 mb-6 font-black uppercase text-emerald-500 text-xs tracking-[0.3em]"><Sparkles className="w-5 h-5" /> Gist Output</div>
                      <div className={`flex-1 min-h-[350px] h-full rounded-[3rem] border-2 border-dashed p-10 flex items-center justify-center transition-all duration-500 overflow-hidden ${isDarkMode ? 'border-indigo-500/10 bg-indigo-500/5' : 'border-slate-200 bg-slate-50/50'}`}>
                        {outputText ? <p className="text-2xl leading-[1.6] font-medium animate-in fade-in slide-in-from-right-4 duration-700 italic opacity-95 break-words overflow-wrap-anywhere">{outputText}</p> : <div className="text-center space-y-4 opacity-20"><Zap className="w-12 h-12 mx-auto animate-pulse" /><p className="text-lg font-bold">Waiting for input...</p></div>}
                      </div>
                      <div className="mt-8 flex justify-end gap-4">
                        {outputText && (
                          <>
                            <button onClick={() => navigator.clipboard.writeText(outputText)} className={`flex items-center gap-2 text-xs font-black px-6 py-3 rounded-2xl transition-all ${isDarkMode ? 'bg-slate-900 text-slate-400 hover:text-white' : 'bg-white border text-slate-600 hover:bg-slate-50 shadow-sm'}`}><Copy className="w-4 h-4" /> Copy</button>
                            <button className="flex items-center gap-2 text-xs font-black px-6 py-3 rounded-2xl bg-indigo-600 text-white shadow-xl shadow-indigo-600/20 hover:-translate-y-1 transition-all"><Share2 className="w-4 h-4" /> Share</button>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section id="features" className={`py-32 relative overflow-hidden transition-colors duration-700 ${isDarkMode ? 'bg-slate-950/40' : 'bg-slate-50'}`}>
              <div className="max-w-7xl mx-auto px-6 relative z-10 text-center">
                <h2 className="text-5xl font-[900] mb-6 tracking-tight">Why Choose <span className="text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-500">Gist?</span></h2>
                <p className={`text-xl mb-20 max-w-2xl mx-auto font-medium ${isDarkMode ? 'text-slate-400' : 'text-slate-600'}`}>Engineered for speed, privacy, and absolute clarity.</p>
                <div className="grid md:grid-cols-3 gap-10">
                  {FEATURES.map((feature, idx) => (
                    <div key={idx} className={`p-10 rounded-[3.5rem] border-2 transition-all duration-500 float-on-hover text-left group ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-white border-slate-100 shadow-sm'}`}>
                      <div className="w-16 h-16 rounded-[1.5rem] bg-indigo-600 text-white flex items-center justify-center mb-8 shadow-xl group-hover:scale-110 transition-transform">{feature.icon}</div>
                      <h3 className="text-2xl font-black mb-4 tracking-tight group-hover:text-indigo-500 transition-colors uppercase italic">{feature.title}</h3>
                      <p className={`leading-relaxed font-bold opacity-50 ${isDarkMode ? 'text-slate-400' : 'text-slate-500'}`}>{feature.description}</p>
                    </div>
                  ))}
                </div>
              </div>
            </section>

            <section className={`py-32 relative ${isDarkMode ? 'bg-[#020617]' : 'bg-white'}`}>
              <div className="max-w-5xl mx-auto px-6 text-center">
                <div className="inline-flex items-center gap-2 px-5 py-2 rounded-full text-[10px] font-black mb-10 border bg-emerald-500/10 border-emerald-500/30 text-emerald-400">
                  <ShieldCheck className="w-4 h-4" />
                  <span className="uppercase tracking-[0.3em]">100% Private & Secure</span>
                </div>
                <h2 className="text-5xl font-[900] mb-8 tracking-tight">Your Data Stays <span className="text-emerald-500">Yours</span></h2>
                <p className={`text-2xl mb-16 max-w-3xl mx-auto leading-relaxed font-medium ${isDarkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                  We don't store your text. Everything happens in real-time. Your sensitive documents remain completely private.
                </p>
                <div className="grid md:grid-cols-3 gap-8 text-left">
                  <div className={`p-8 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
                    <div className="w-12 h-12 rounded-xl bg-emerald-500/10 flex items-center justify-center mb-6">
                      <ShieldCheck className="w-6 h-6 text-emerald-500" />
                    </div>
                    <h3 className="text-xl font-black mb-3">No Data Stored</h3>
                    <p className="opacity-60 leading-relaxed">Your text is processed instantly and never saved on our servers.</p>
                  </div>
                  <div className={`p-8 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
                    <div className="w-12 h-12 rounded-xl bg-emerald-500/10 flex items-center justify-center mb-6">
                      <Globe className="w-6 h-6 text-emerald-500" />
                    </div>
                    <h3 className="text-xl font-black mb-3">Encrypted Connection</h3>
                    <p className="opacity-60 leading-relaxed">All data transfers use industry-standard HTTPS encryption.</p>
                  </div>
                  <div className={`p-8 rounded-3xl border-2 ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
                    <div className="w-12 h-12 rounded-xl bg-emerald-500/10 flex items-center justify-center mb-6">
                      <Zap className="w-6 h-6 text-emerald-500" />
                    </div>
                    <h3 className="text-xl font-black mb-3">Real-Time Only</h3>
                    <p className="opacity-60 leading-relaxed">Text goes in, simplified text comes out. Nothing in between.</p>
                  </div>
                </div>
              </div>
            </section>

            <section id="pricing" className="py-32 px-6">
              <div className="max-w-7xl mx-auto">
                <div className="text-center mb-24">
                  <h2 className="text-6xl font-[900] mb-6 tracking-tighter">Fair <span className="text-indigo-600 italic">Plans.</span></h2>
                  <p className={`text-xl font-medium ${isDarkMode ? 'text-slate-400' : 'text-slate-600'}`}>Clarity should be accessible to everyone.</p>
                </div>
                <div className="grid lg:grid-cols-3 gap-12">
                  {PRICING_TIERS.map((tier, idx) => (
                    <div key={idx} className={`p-12 rounded-[4rem] border-2 flex flex-col transition-all relative ${tier.isPopular ? 'scale-110 z-10 border-indigo-500 bg-indigo-500/5 shadow-2xl shadow-indigo-500/10' : 'border-slate-800 bg-slate-950/20'}`}>
                      {tier.isPopular && <div className="absolute -top-5 left-1/2 -translate-x-1/2 bg-indigo-500 text-white text-[10px] font-black uppercase tracking-[0.3em] px-8 py-2 rounded-full shadow-xl">Recommended</div>}
                      <h3 className="text-2xl font-black mb-2 uppercase tracking-tight italic">{tier.name}</h3>
                      <div className="flex items-baseline gap-2 mb-6">
                        <span className="text-6xl font-black tracking-tighter">{tier.price}</span>
                        <span className="text-lg opacity-40 font-bold uppercase tracking-widest">/mo</span>
                      </div>
                      <p className="opacity-60 mb-10 font-medium text-lg leading-relaxed">{tier.description}</p>
                      <ul className="space-y-6 mb-12 flex-1">
                        {tier.features.map((f, i) => (
                          <li key={i} className="flex items-center gap-4 text-sm font-black uppercase tracking-widest"><Check className="w-5 h-5 text-emerald-500" /> {f}</li>
                        ))}
                      </ul>
                      <button onClick={() => handlePurchase(tier.name)} className={`w-full py-6 rounded-[2.5rem] font-black text-xl transition-all ${userTier === tier.name.replace('Gist ', '') ? 'bg-emerald-600' : 'bg-indigo-600 hover:bg-indigo-700 shadow-xl shadow-indigo-600/20'}`}>
                        {userTier === tier.name.replace('Gist ', '') ? 'Active Gist' : tier.buttonText}
                      </button>
                    </div>
                  ))}
                </div>
              </div>
            </section>

            <footer className={`pt-32 pb-12 border-t transition-all duration-700 ${isDarkMode ? 'bg-[#0a0f1e] border-slate-900' : 'bg-white border-slate-100'}`}>
              <div className="max-w-7xl mx-auto px-6">
                <div className="grid grid-cols-1 md:grid-cols-4 gap-16 mb-24">
                  <div className="col-span-1 md:col-span-2">
                    <div className="flex items-center gap-3 mb-8 group">
                      <div className="bg-indigo-600 p-2 rounded-xl group-hover:rotate-12 transition-transform">
                        <Zap className="w-8 h-8 text-white fill-current" />
                      </div>
                      <span className="text-4xl font-black tracking-tighter uppercase">Gist<span className="text-indigo-500">.</span></span>
                    </div>
                    <p className="text-2xl max-w-sm opacity-50 font-black leading-tight mb-10 uppercase tracking-tighter">Decentralizing complexity. <br /> Empowering the layman.</p>
                  </div>
                  <div>
                    <h4 className="text-sm font-black text-indigo-500 uppercase tracking-[0.3em] mb-10">Company</h4>
                    <ul className="space-y-6 font-black uppercase tracking-widest text-[11px] opacity-40">
                      <li onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })} className="hover:text-indigo-500 cursor-pointer transition-colors">About</li>
                      <li onClick={() => { const el = document.getElementById('features'); el?.scrollIntoView({ behavior: 'smooth' }); }} className="hover:text-indigo-500 cursor-pointer transition-colors">Features</li>
                      <li onClick={() => { const el = document.getElementById('pricing'); el?.scrollIntoView({ behavior: 'smooth' }); }} className="hover:text-indigo-500 cursor-pointer transition-colors">Pricing</li>
                    </ul>
                  </div>
                  <div>
                    <h4 className="text-sm font-black text-indigo-500 uppercase tracking-[0.3em] mb-10">Legal</h4>
                    <ul className="space-y-6 font-black uppercase tracking-widest text-[11px] opacity-40">
                      <li onClick={() => setView('privacy')} className="hover:text-indigo-500 cursor-pointer transition-colors">Privacy Policy</li>
                      <li onClick={() => setView('terms')} className="hover:text-indigo-500 cursor-pointer transition-colors">Terms & Conditions</li>
                    </ul>
                  </div>
                </div>
                <div className="pt-12 border-t border-slate-800/50 text-center opacity-30 text-[10px] font-black uppercase tracking-[0.5em]">
                  <span>© 2026 Gist AI Systems. All Rights Reserved.</span>
                </div>
              </div>
            </footer>
          </>
        )}

        {showAuthModal && (
          <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/95 backdrop-blur-xl animate-in fade-in duration-500">
            <div className="max-w-md w-full rounded-[4rem] p-12 bg-slate-900 border-2 border-indigo-500/30 relative overflow-hidden shadow-[0_0_100px_rgba(99,102,241,0.2)]">
              <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-500"></div>
              <button onClick={() => setShowAuthModal(false)} className="absolute top-8 right-8 text-slate-500 hover:text-white transition-colors">
                <X className="w-6 h-6" />
              </button>

              <div className="text-center mb-8">
                <div className="w-16 h-16 rounded-full bg-indigo-500/10 flex items-center justify-center text-indigo-500 mx-auto mb-6">
                  <Zap className="w-8 h-8 fill-current" />
                </div>
                <h3 className="text-3xl font-black mb-2 uppercase tracking-tighter">{authMode === 'signup' ? 'Create Account' : 'Welcome Back'}</h3>
                <p className="opacity-50 text-sm">Get unlimited access to Gist Pro</p>
              </div>

              <form onSubmit={(e) => {
                e.preventDefault();
                // Simple auth - will integrate Supabase later
                setIsAuthenticated(true);
                setUserTier('Pro');
                setShowAuthModal(false);
                setView('dashboard');
              }} className="space-y-6">
                <div>
                  <label className="block text-sm font-bold mb-2 opacity-60">Email</label>
                  <input
                    type="email"
                    value={userEmail}
                    onChange={(e) => setUserEmail(e.target.value)}
                    required
                    placeholder="you@example.com"
                    className="w-full px-6 py-4 rounded-2xl bg-slate-800 border-2 border-slate-700 focus:border-indigo-500 outline-none transition-all"
                  />
                </div>
                <div>
                  <label className="block text-sm font-bold mb-2 opacity-60">Password</label>
                  <input
                    type="password"
                    required
                    placeholder="••••••••"
                    className="w-full px-6 py-4 rounded-2xl bg-slate-800 border-2 border-slate-700 focus:border-indigo-500 outline-none transition-all"
                  />
                </div>

                <button type="submit" className="w-full py-5 bg-indigo-600 text-white rounded-[2rem] font-black text-lg hover:scale-105 transition-all shadow-xl shadow-indigo-600/30 uppercase tracking-widest">
                  {authMode === 'signup' ? 'Sign Up & Continue' : 'Login & Continue'}
                </button>
              </form>

              <div className="mt-8 text-center">
                <button
                  onClick={() => setAuthMode(authMode === 'signup' ? 'login' : 'signup')}
                  className="text-sm opacity-60 hover:opacity-100 transition-opacity"
                >
                  {authMode === 'signup' ? 'Already have an account? Login' : "Don't have an account? Sign up"}
                </button>
              </div>
            </div>
          </div>
        )}

        {showLimitModal && (
          <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/95 backdrop-blur-xl animate-in fade-in duration-500">
            <div className="max-w-md w-full rounded-[4rem] p-12 bg-slate-900 border-2 border-indigo-500/30 text-center relative overflow-hidden shadow-[0_0_100px_rgba(99,102,241,0.2)]">
              <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-500"></div>
              <div className="w-20 h-20 rounded-full bg-indigo-500/10 flex items-center justify-center text-indigo-500 mx-auto mb-8 animate-bounce"><Zap className="w-12 h-12 fill-current" /></div>
              <h3 className="text-3xl font-black mb-4 uppercase tracking-tighter leading-none italic">Daily Limit Hit.</h3>
              <p className="opacity-50 mb-10 font-bold uppercase tracking-tight text-sm">Starter tier is restricted to 5 gists per day. Upgrade to Gist Pro for unlimited access and expert tools.</p>
              <button onClick={() => { setShowLimitModal(false); setView('landing'); setTimeout(() => { const el = document.getElementById('pricing'); el?.scrollIntoView({ behavior: 'smooth' }); }, 100); }} className="w-full py-6 bg-indigo-600 text-white rounded-[2rem] font-black text-xl hover:scale-105 transition-all shadow-xl shadow-indigo-600/30 uppercase tracking-widest">Upgrade to Pro</button>
              <button onClick={() => setShowLimitModal(false)} className="mt-6 text-[10px] font-black uppercase opacity-30 hover:opacity-100 transition-opacity tracking-[0.3em]">Stay Free</button>
            </div>
          </div>
        )}
      </div>
      );
};

      export default App;
